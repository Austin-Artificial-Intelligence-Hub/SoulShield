# SoulShield Telegram Bot ğŸ›¡ï¸

A Persian/Farsi voice-enabled mental wellness companion bot for Telegram.

## Features

- ğŸ¤ **Voice Messages**: Speak in Persian (Farsi) - uses OpenAI Whisper for transcription
- ğŸ’¬ **Text Messages**: Type in any language
- ğŸ”Š **Voice Responses**: Get audio responses using OpenAI TTS
- ğŸ”’ **Secure**: Integrates with SoulShield API with user authentication
- ğŸŒ **Bilingual**: Interface in Persian with English fallback

## Setup

### 1. Create a Telegram Bot

1. Open Telegram and message [@BotFather](https://t.me/botfather)
2. Send `/newbot`
3. Choose a name (e.g., "SoulShield Wellness")
4. Choose a username (must end in `bot`, e.g., `soulshield_wellness_bot`)
5. Copy the **Bot Token**

### 2. Install Dependencies

```bash
cd telegram_bot
pip install -r requirements.txt
```

### 3. Set Environment Variables

```bash
# From the SoulShield directory
export $(cat .env | xargs)

# Add Telegram bot token
export TELEGRAM_BOT_TOKEN="7123456789:AAHxyz..."

# Optional: Override API URL if needed
export API_URL="https://pypwr35xf3.execute-api.us-east-1.amazonaws.com/prod"
export API_KEY="your_api_key"
```

### 4. Run the Bot

```bash
python bot.py
```

## Usage

### Commands

| Command | Description |
|---------|-------------|
| `/start` | Welcome message and instructions |
| `/help` | Show help in Persian |
| `/register username password` | Create new account |
| `/login username password` | Login to existing account |

### Voice Messages

1. Login first with `/login`
2. Send a voice message in Persian
3. Bot will:
   - Transcribe your voice to text
   - Send to SoulShield AI
   - Reply with text AND voice response

### Text Messages

1. Login first with `/login`
2. Type any message
3. Get a supportive response

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Telegram User  â”‚â”€â”€â”€â”€â–¶â”‚  Telegram Bot    â”‚â”€â”€â”€â”€â–¶â”‚  SoulShield API â”‚
â”‚  (Voice/Text)   â”‚â—€â”€â”€â”€â”€â”‚  (Python)        â”‚â—€â”€â”€â”€â”€â”‚  (AWS Lambda)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  OpenAI APIs     â”‚
                        â”‚  - Whisper (STT) â”‚
                        â”‚  - TTS (Speech)  â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Environment Variables

| Variable | Required | Description |
|----------|----------|-------------|
| `TELEGRAM_BOT_TOKEN` | Yes | Token from @BotFather |
| `OPENAI_API_KEY` | Yes | OpenAI API key for Whisper & TTS |
| `API_URL` | No | SoulShield API URL (has default) |
| `API_KEY` | No | SoulShield API key |

## Privacy

- Voice messages are processed through OpenAI Whisper API
- Text responses are generated by SoulShield AI
- User sessions are stored in memory (restart clears sessions)
- All communication with SoulShield API is encrypted (HTTPS)

